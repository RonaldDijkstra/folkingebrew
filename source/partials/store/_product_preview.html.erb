<%
  if product.data.images
    product_image = product.data.images.first
  end
%>

<% link_to product.url, class: "product" do %>
  <div class="product-box">
    <div class="product-media">
      <% if product_image %>
        <%= image_tag product_image, alt: product.title, class: "product-image" %>
      <% else %>
        <%= image_tag "/assets/images/shop/placeholder.png", alt: product.title, class: "product-image" %>
      <% end %>
    </div>
    <div class="product-content">
      <div class="title">
        <h2>
          <%= product.title %>
        </h2>
      </div>
      <% if product.data.out_of_stock %>
        <div class="out-of-stock">
          <p>
            Out of Stock
          </p>
        </div>
      <% else %>
        <div class="price">
          <p>
            <span class="price-currency">â‚¬</span>
            <span class="price-value"><%= number_to_currency(product.data.price, :unit => "").gsub!(/\./,",") %></span>
          </p>
        </div>
      <% end %>
    </div>

    <%= partial "partials/store/_snipcart_button", locals: { product: product, variant: "hidden" } %>
  </div>
<% end %>
